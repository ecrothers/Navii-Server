<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Attraction Entry Webtool</title>
    <style>
        .col1 {
            width: 25%;
        }
        .col2 {
            width: 75%;
        }
    </style>
        <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
        <script>
        var counter = 0;
        var limit = 6;
        /*function addExistingInput(divName){
            if (counter == limit)  {
                alert("Limit of adding " + counter + " attractions");
            }
            else {
                counter++;
                var newdiv = document.createElement('div');
                newdiv.innerHTML = "<b>Attraction " + counter + "</b>" +
                "<table style='width:100%'> \
                <tr> \
                <td class='col1'>Attraction Id:</td> \
                <td class='col2'><input type='text' name='attraction_id['" + counter + "]'></td> \
                </tr>\
                </table> \
                <br>";
                document.getElementById(divName).appendChild(newdiv);
            }
        }*/
        function addInput(divName){
            if (counter == limit)  {
                alert("Limit of adding " + counter + " attractions");
            }
            else {
                counter++;
                var newdiv = document.createElement('div');
                newdiv.innerHTML = "<b>Attraction " + counter + "</b>" +
                "<table style='width:100%'> \
                <tr> \
                <td class='col1'>Attraction Name:</td> \
                <td class='col2'><input type='text' name='attraction_name['" + counter + "]'></td> \
                </tr> \
                <tr> \
                <td class='col1'>Price:</td> \
                <td class ='col2'><input type='text' name='price[" + counter + "]'></td> \
                </tr> \
                <tr> \
                <tr> \
                <td class='col1'>Purchase:</td> \
                <td class ='col2'><input type='text' name='purchase[" + counter + "]'></td> \
                </tr> \
                <td class='col1'>Duration:</td> \
                <td class ='col2'><input type='text' name='duration[" + counter + "]'></td> \
                </tr> \
                <tr> \
                <td class='col1'>Blurb (link):</td> \
                <td class ='col2'><input type='text' name='blurb_uri[" + counter + "]'></td> \
                </tr> \
                <tr> \
                <td class='col1'>Photo (link):</td> \
                <td class ='col2'><input type='text' name='photo_uri[" + counter + "]'></td> \
                </tr> \
                <tr> \
                <td class='col1'>Location:</td> \
                <td class ='col2'><input type='text' name='location[" + counter + "]'></td> \
                </tr> \
                </table><br>";
                document.getElementById(divName).appendChild(newdiv);
            }
        }
    </script>
</head>
<body onload="addInput('inDiv')">
<!--<form enctype='application/json' action="http://localhost:8080/attraction/" method="post">-->
    <div id="inDiv">
    </div>
    <!--<input type="button" value="Add new attraction" onClick="addInput('inDiv');">-->
    <input id="subButton" type="button" value="Submit Attraction">

    <script>
        $("#subButton").click(function() {
            for (var i = 0; i <= counter; ++i) {
                var payload = {};
                payload.name = $("attraction_name[" + i + "]").val();
                payload.location = $("location[" + i + "]").val();
                payload.photoUri = $("photo_uri[" + i + "]").val();
                payload.blurbUri = $("blurb_uri[" + i + "]").val();
                payload.price = $("price[" + i + "]").val();
                payload.purchase = $("purchase[" + i + "]").val();
                payload.duration = $("duration[" + i + "]").val();

                $.ajax({
                    type: 'POST',
                    crossDomain: true,
                    url: 'https://localhost:8443/attraction/',
                    contentType: 'application/json',
                    dataType: 'jsonp',
                    data: JSON.stringify(payload)
                });
            }

            return false;
        });
    </script>
<!--</form>-->
</body>
</html>